<%-include('../include/_adminhead')%>

    <!-- Products -->

    <section style="margin-bottom:40px">
        <div class="container">
            <div class="row mt-4">
                <a href="/add-product" class="btn btn-success ml-auto proadd">Add product</a>
            </div>
            <table class="table mt-4" id="proTable">
                <thead>
                    <tr>
                        <th scope="col">No.</th>
                        <th scope="col">Name</th>
                        <th scope="col">Image</th>
                        <th scope="col">Price</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Brand</th>
                        <th scope="col">Category</th>
                        <th scope="col">Action</th>
                    </tr>
                </thead>
                
                <tbody>
                    <% for ( let i = 0; i < products.length; i++){ %>
                    <tr>
                        <th scope="row"><%=i+1%></th>
                        <td><%=products[i].Name%></td>
                        <td><img style="width:50px;height:50px" src="<%=products[i].Image[0]%>" alt="product image"> </td>
                        <td><%=products[i].Price%></td>
                        <td><%=products[i].Quantity%></td>
                        <td><%=products[i].Brand%></td>
                        <td><%=products[i].Category%></td>
                        <td>
                            <a href="/update?id=<%= products[i]._id %>" class="btn border-shadow update">
                                <i class="fa-solid fa-pencil"></i>
                            </a>
                            <div>
                            <!-- <form action="/delete/<%= products[i]._id %>?_method=DELETE" method="post">
                                <a href="" onclick="return confirm('Are want to delete <%=products[i].Name%> ?')">
                                    <button class="btn border-shadow update" type="submit">
                                        <i class="fa-solid fa-trash-can"></i>
                                </button>
                                </a>
                            </form> -->
                            <button onclick="deleteProduct('<%= products[i]._id %>')" class="btn border-shadow update" >
                                <i class="fa-solid fa-trash-can"></i>
                            </button>
                            </div>
                        </td>
                    </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </section>

    <!-- Swal sweetalert -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.print.min.js"></script>
    
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function () {
            $('#proTable').DataTable({
                dom: 'Bfrtip',
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ]
            });
        });
        // function deleteProduct(){
        //     Swal.fire({
        //         title: 'Are you want to delete?',
        //         icon: 'warning',
        //         showCancelButton: true,
        //         confirmButtonColor: '#3085d6',
        //         cancelButtonColor: '#d33',
        //         confirmButtonText: 'Delete'
        //     }).then((result) => {
        //         if (result.isConfirmed) {
        //             location.href = "/logout_admin";
        //         }
        //     })
        // }


        
    </script>

    <!-- /Products -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>

</html>